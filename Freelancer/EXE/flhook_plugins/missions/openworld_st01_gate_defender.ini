[Mission]
nickname = openworld_dyson_sphere
initstate = ACTIVE

[Npc]
nickname = npc_no_battleship
archetype = no2_battleship
loadout = fc_n_no2_battleship_cloak
state_graph = FIGHTER
faction = fc_n_grp
pilot = li_cruiser_default
level = 50

[Npc]
nickname = npc_no_fighter
archetype = no2_fighter
loadout = fc_n_no2_fighter
state_graph = FIGHTER
faction = fc_n_grp
pilot = pilot_outcast_ace
level = 6

[Npc]
nickname = npc_no_elite
archetype = no2_elite
loadout = fc_n_no2_elite
state_graph = FIGHTER
faction = fc_n_grp
pilot = pilot_outcast_ace
level = 7

[Npc]
nickname = npc_no_bomber
archetype = no2_bomber
loadout = fc_n_no2_bomber
state_graph = FIGHTER
faction = fc_n_grp
pilot = pilot_outcast_ace
level = 7

[MsnNpc]
nickname = st01_no_battleship01
npc = npc_no_battleship
system = St01
position = 19441, 0, 14558
rotate = 0, -27, 0
use_ship_ids = true

[MsnNpc]
nickname = st01_no_fighter01
npc = npc_no_fighter
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_fighter02
npc = npc_no_fighter
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_fighter03
npc = npc_no_fighter
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_elite01
npc = npc_no_elite
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_elite02
npc = npc_no_elite
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_elite03
npc = npc_no_elite
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_elite04
npc = npc_no_elite
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_bomber01
npc = npc_no_bomber
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[MsnNpc]
nickname = st01_no_bomber02
npc = npc_no_bomber
system = St01
position = 19441, -50, 14558
use_ship_ids = true
arrival_obj = st01_no_battleship01
label = escorts

[ObjList]
nickname = obj_wait
SetPriority = ALWAYS_EXECUTE
Delay = 9999999

[ObjList]
nickname = obj_stay_at_xeno_gate
SetPriority = NORMAL
StayInRange = 16116, 0, 12472, 5000
Idle = no_params

[ObjList]
nickname = obj_return_to_xeno_gate
SetPriority = ALWAYS_EXECUTE
GotoVec = Goto_No_Cruise, 19441, 0, 14558
Delay = 9999999

[ObjList]
nickname = obj_protect_battleship
StayInRange = st01_no_battleship01, 2500
Follow = st01_no_battleship01, 150, 400
SetLifeTime = 5

[Trigger]
nickname = spawn_gate_defender
initstate = ACTIVE
Cnd_InSpace = STRANGER, St01
Act_DebugMsg = spawn_gate_defender
Act_SpawnShip = st01_no_battleship01, obj_wait
Act_ActTrig = someone_close_to_defender
Act_ActTrig = inside_range_to_gate_defender
Act_ActTrig = gate_defender_destroyed

[Trigger]
nickname = inside_range_to_gate_defender
repeatable = AUTO
Cnd_DistObj = STRANGER, st01_no_battleship01, 2500, INSIDE
Act_DebugMsg = inside_range_to_gate_defender
Act_AddLabel = ACTIVATOR, at_gate_defender
Act_DebugMsg = Added
Act_ActTrig = outside_range_to_gate_defender
Act_ActTrig = left_st01_space

[Trigger]
nickname = outside_range_to_gate_defender
repeatable = AUTO
Cnd_DistObj = at_gate_defender, st01_no_battleship01, 4000, OUTSIDE
Act_DebugMsg = outside_range_to_gate_defender
Act_RemoveLabel = ACTIVATOR, at_gate_defender

[Trigger]
nickname = left_st01_space
repeatable = AUTO
Cnd_SystemSpaceExit = at_gate_defender, ANY, St01
Act_DebugMsg = left_st01_space
Act_LeaveMsn = ACTIVATOR

[Trigger]
nickname = someone_close_to_defender
repeatable = MANUAL
Act_DebugMsg = someone_close_to_defender
Cnd_Count = at_gate_defender, 1, EQUAL
Act_GiveObjList = st01_no_battleship01, obj_stay_at_xeno_gate
Act_Cloak = st01_no_battleship01, FALSE
Act_DeactTrig = wait_at_xeno_gate
Act_ActTrig = spawn_defender_escorts
Act_ActTrig = respawn_defender_escorts
Act_ActTrig = nobody_close_to_defender

[Trigger]
nickname = nobody_close_to_defender
repeatable = MANUAL
Cnd_Count = at_gate_defender, 0, EQUAL
Act_DebugMsg = nobody_close_to_defender
Act_GiveObjList = st01_no_battleship01, obj_return_to_xeno_gate
Act_Cloak = st01_no_battleship01, TRUE
Act_DeactTrig = respawn_defender_escorts
Act_ActTrig = someone_close_to_defender
Act_ActTrig = wait_at_xeno_gate

[Trigger]
nickname = wait_at_xeno_gate
repeatable = MANUAL
Act_DebugMsg = wait_at_xeno_gate
Cnd_DistVec = st01_no_battleship01, 19441, 0, 14558, 200, INSIDE
Act_GiveObjList = st01_no_battleship01, obj_wait

[Trigger]
nickname = spawn_defender_escorts
repeatable = MANUAL
Cnd_True = no_params
Act_SpawnShip = st01_no_fighter01, obj_protect_battleship
Act_SpawnShip = st01_no_fighter02, obj_protect_battleship
Act_SpawnShip = st01_no_fighter03, obj_protect_battleship
Act_SpawnShip = st01_no_elite01, obj_protect_battleship
Act_SpawnShip = st01_no_elite02, obj_protect_battleship
Act_SpawnShip = st01_no_elite03, obj_protect_battleship
Act_SpawnShip = st01_no_elite04, obj_protect_battleship
Act_SpawnShip = st01_no_bomber01, obj_protect_battleship
Act_SpawnShip = st01_no_bomber02, obj_protect_battleship

[Trigger]
nickname = respawn_defender_escorts
repeatable = AUTO
Cnd_Destroyed = escorts, 6
Act_ActTrig = spawn_defender_escorts

[Trigger]
nickname = gate_defender_destroyed
Cnd_Destroyed = st01_no_battleship01, 1
Act_DeactTrig = inside_range_to_gate_defender
Act_DeactTrig = outside_range_to_gate_defender
Act_DeactTrig = someone_close_to_defender
Act_DeactTrig = nobody_close_to_defender
Act_PlayMusic = at_gate_defender, , , , music_victory_short, 0.2, TRUE
Act_GiveObjList = escorts, obj_stay_at_xeno_gate
Act_ActTrig = terminate_msn

[Trigger]
nickname = terminate_msn
Cnd_Timer = 6
Act_TerminateMsn = no_params
