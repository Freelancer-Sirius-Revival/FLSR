;; Bretonia Custom Mission - VS Mollys (Leeds)

;; ###############################
;; --------MISSION HEADER---------
;; ###############################

[Mission]
nickname = Br04_Custom_Mission_01
offer_type = DestroyInstallation
offer_target_system = Br04
offer_faction = br_p_grp
offer_reward = 20000000
offer_bases = Br04_01_base
reoffer = Always
reoffer_delay = 300
offer_string_id = 0
;res str
; Difficulty Level: 5-30
; Enemy Shiptypes: Fighter, Modified Utility Ships
; Reward: 20.000.000$
; Destination: Leeds, 6F
; Objective: Destroy All Hostile Targets
; Combat Zone: 7.5K from Target
; Available Ships: 5
; 
; Bonus Bounty for "Aztec": 1.000.000$
;
; A group of Mollys have established a base in the Dustfield near Leeds. Bretonia Police Authority needs assistance. This is a special mission, and every freelancer must sign a non-disclosure agreement. A large reward awaits those who participate.
; 
; Reoffer after Mission has ended: 5 Minutes

;; ###############################
;; ------MISSION DESCRIPTION------
;; ###############################

; 	Players need to destroy a group of Molly Ships and a damaged Port in the Smog Cloud near Leeds

; Reward:
;	20.000.000$

;; ###############################
;; ------------LABELS-------------
;; ###############################

;	players				-	Player who are currently assigned to the mission	
;	hostiles			-	Enemy NPC´s or Solars
;	allies				-	Friendly NPC´s or Solars
; 	Boss				-	Enemy Strong NPC´s
;	Not_Heard_Warning	-	Players does not heard Warning (Leaving Combat Area)
;	Heard_Warning		-	Players heard Warning (Leaving Combat Area)
;   Start_On_base		-	Players who are docked during the start of the Mission
; 	Start_in_Space		-	Players who are in space during the start of the Mission
;	Launching			-	Docked Players who are launching into space
;	alive				-	Players who are alive in the Missions Area or during the start of the mission
;	dead				-	Player who are died during the mission
;   Target				-	Target Object

;; ###############################
;; -----NPC AND SOLAR SECTION-----
;; ###############################

;; -- NPC´S --

;; Attackers
[Npc]
nickname = police_cavalier_01
archetype = br_ship_fighter_light01_npc
loadout = br_p_br_fighter_loadout_d5_a
faction = br_p_grp
state_graph = FIGHTER
space_costume = br_newscaster_head_gen_hat, br_female_guard_body, comm_br_kaitlyn_female
voice = pilot_f_leg_f01
pilot = pilot_police_ace
level = 5

[Npc]
nickname = police_cavalier_02
archetype = br_ship_fighter_light01_npc
loadout = br_p_br_fighter_loadout_d5_a
faction = br_p_grp
state_graph = FIGHTER
voice = pilot_f_leg_f01
pilot = pilot_police_ace
level = 5

[Npc]
nickname = police_cavalier_03
archetype = br_ship_fighter_light01_npc
loadout = br_p_br_fighter_loadout_d5_a
faction = br_p_grp
state_graph = FIGHTER
voice = pilot_f_mil_m01
pilot = pilot_police_ace
level = 5

[Npc]
nickname = police_cavalier_04
archetype = br_ship_fighter_light01_npc
loadout = br_p_br_fighter_loadout_d5_a
faction = br_p_grp
state_graph = FIGHTER
voice = pilot_f_mil_m01a
pilot = pilot_police_ace
level = 5

[Npc]
nickname = Armed_Forces_Crusader_01
archetype = br_ship_fighter_light01_npc
loadout = br_p_br_fighter_loadout_d5_a
faction = br_n_grp
state_graph = FIGHTER
space_costume = br_sales_head_hat, br_male_elite_body, comm_br_brighton
voice = pilot_f_mil_m02
pilot = pilot_military_ace
level = 5

[Npc]
nickname = Armed_Forces_Crusader_02
archetype = br_ship_fighter_light01_npc
loadout = br_p_br_fighter_loadout_d5_a
faction = br_n_grp
state_graph = FIGHTER
voice = pilot_f_leg_f01
pilot = pilot_military_ace
level = 5

;; Attacker Wing01
[MsnNpc]
nickname = npc_police_cavalier_01
npc = police_cavalier_01
string_id = 0
;res str
; Cpt. Smith
system = Br04
position = 44617, 0, 55549.7
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_police_cavalier_02
npc = police_cavalier_02
string_id = 0
;res str
; Lt. Williams
system = Br04
position = 44717, 0, 55549.7
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_police_cavalier_03
npc = police_cavalier_03
string_id = 0
;res str
; Officer Jones
system = Br04
position = 44817, 0, 55549.7
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_police_cavalier_04
npc = police_cavalier_04
string_id = 0
;res str
; Officer Taylor
system = Br04
position = 44517, 0, 55549.7
pilot_job = assault_job
label = allies

;; Attacker Wing02
[MsnNpc]
nickname = npc_Armed_Forces_Crusader_01
npc = Armed_Forces_Crusader_01
string_id = 0
;res str
; Omega 1
system = Br04
position = 46220.3, 0, 53946.4
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_Armed_Forces_Crusader_02
npc = Armed_Forces_Crusader_02
string_id = 0
;res str
; Omega 2
system = Br04
position = 46320.3, 0, 53946.4
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_Armed_Forces_Crusader_03
npc = Armed_Forces_Crusader_01
string_id = 0
;res str
; Omega 3
system = Br04
position = 46120.3, 0, 53946.4
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_Armed_Forces_Crusader_04
npc = Armed_Forces_Crusader_02
string_id = 0
;res str
; Omega 4
system = Br04
position = 46320.3, 0, 53946.4
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_Armed_Forces_Crusader_05
npc = Armed_Forces_Crusader_01
string_id = 0
;res str
; Omega 5
system = Br04
position = 46420.3, 0, 53946.4
pilot_job = assault_job
label = allies

[MsnNpc]
nickname = npc_Armed_Forces_Crusader_06
npc = Armed_Forces_Crusader_02
string_id = 0
;res str
; Omega 6
system = Br04
position = 47220.3, 0, 53946.4
pilot_job = assault_job
label = allies

;; Enemy Defenders
[Npc]
nickname = Molly_Wolfhound_m01
archetype = pi_ship_fighter_heavy01_npc
loadout = fc_m_pi_elite_loadout_d5_b
faction = fc_m_grp
state_graph = FIGHTER
space_costume = ge_male2_head, pi_pirate1_body, comm_br_elite
voice = pilot_f_ill_m01
pilot = pilot_pirate_ace
level = 5

[Npc]
nickname = Molly_Wolfhound_m02
archetype = pi_ship_fighter_heavy01_npc
loadout = fc_m_pi_elite_loadout_d5_a
faction = fc_m_grp
state_graph = FIGHTER
space_costume = pi_pirate4_head, pi_pirate1_body, comm_br_elite
voice = pilot_f_ill_m01
pilot = pilot_pirate_ace
level = 5

[Npc]
nickname = Molly_Wolfhound0_f01
archetype = pi_ship_fighter_heavy01_npc
loadout = fc_m_pi_elite_loadout_d5_b
faction = fc_m_grp
state_graph = FIGHTER
space_costume = li_newscaster_head_gen_hat, pl_female2_journeyman_body, comm_br_darcy_female
voice = pilot_f_leg_f01b
pilot = pilot_pirate_ace
level = 5

[Npc]
nickname = Molly_Foxhound01_m01
archetype = pi_ship_fighter_medium01_npc
loadout = fc_m_pi_elite_loadout_d5_a
faction = fc_m_grp
state_graph = FIGHTER
space_costume = ge_male4_head, pi_pirate8_body, comm_br_guard
voice = pilot_f_ill_m02
pilot = pilot_pirate_ace
level = 5

[Npc]
nickname = Molly_Wolfhound_boss
archetype = pi_ship_fighter_heavy01_npc
loadout = fc_m_pi_elite_loadout_d6_b
faction = fc_m_grp
state_graph = FIGHTER
space_costume = pi_pirate1_head, pi_pirate1_body, comm_br_elite
voice = pilot_f_ill_m02a
pilot = pilot_pirate_ace
level = 6

[Npc]
nickname = Molly_battle_transport_01
archetype = cv_ship_transport01_npc
loadout = pirate_small_transport_loadout_d20
faction = fc_m_grp
state_graph = FIGHTER
voice = pilot_f_ill_m01b
pilot = gunboat_default
level = 30

[Npc]
nickname = Molly_combat_train_01
archetype = cv_ship_transport04_npc
loadout = pirate_small_train_loadout_d20
faction = fc_m_grp
state_graph = FIGHTER
voice = pilot_f_ill_m01
pilot = gunboat_default
level = 30

;; Defender Wing 01
[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_01
npc = Molly_Wolfhound_m01
string_id = 237044
system = Br04
position = 48213, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_02
npc = Molly_Wolfhound0_f01
string_id = 237044
system = Br04
position = 48313, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_03
npc = Molly_Wolfhound_m01
string_id = 237044
system = Br04
position = 48413, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_04
npc = Molly_Wolfhound_m01
string_id = 237044
system = Br04
position = 48113, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_05
npc = Molly_Wolfhound_m01
string_id = 237044
system = Br04
position = 48013, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_06
npc = Molly_Wolfhound0_f01
string_id = 237044
system = Br04
position = 48513, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_07
npc = Molly_Wolfhound_m01
string_id = 237044
system = Br04
position = 48813, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m01_08
npc = Molly_Wolfhound_m01
string_id = 237044
system = Br04
position = 48913, 0, 56166
pilot_job = defend_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_battle_transport_01_01
npc = Molly_battle_transport_01
string_id = 0
;res str
; Battle Transport
system = Br04
position = 48589, 0, 55837
pilot_job = job_gunboat_a
label = hostiles

[MsnNpc]
nickname = npc_Molly_battle_transport_01_02
npc = Molly_battle_transport_01
string_id = 0
;res str
; Battle Transport
system = Br04
position = 48719, 0, 55324
pilot_job = job_gunboat_a
label = hostiles

[MsnNpc]
nickname = npc_Molly_combat_train_01_01
npc = Molly_combat_train_01
string_id = 0
;res str
; Combat Train
system = Br04
position = 48896.9, 0, 55656.2
pilot_job = job_gunboat_a
label = hostiles

;; Defender Wing 02
[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_01
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 52098, 0, 56482
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_02
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 52198, 0, 56482.4
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_03
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 51998, 0, 56482.4
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_04
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 52298, 0, 56482.4
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_05
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 52398, 0, 56482.4
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_06
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 52498, 0, 56482.4
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_07
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 52098, 100, 56482.4
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound01_m01_08
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 52098, -100, 56482.4
pilot_job = assault_job
label = hostiles

;; Defender Wing 03
[MsnNpc]
nickname = npc_Molly_Wolfhound_m02_01
npc = Molly_Wolfhound_m02
string_id = 237044
system = Br04
position = 52617, 0, 55549.7
pilot_job = bomber_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Wolfhound_m02_02
npc = Molly_Wolfhound_m02
string_id = 237044
system = Br04
position = 52417, 0, 55549.7
pilot_job = bomber_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_combat_train_02_01
npc = Molly_combat_train_01
string_id = 0
;res str
; Combat Train
system = Br04
position = 52517, 0, 55549.7
pilot_job = job_gunboat_a
label = hostiles

;; Defender Boss
[MsnNpc]
nickname = npc_Molly_Wolfhound_boss
npc = Molly_Wolfhound_boss
string_id = 0
;res str
; "Aztec"
system = Br04
position = 48617, 3000, 55549.7
pilot_job = assault_job
label = Boss

[MsnNpc]
nickname = npc_Molly_Foxhound_escort01
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 48617, 3000, 55549.7
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_Foxhound_escort02
npc = Molly_Foxhound01_m01
string_id = 460224
system = Br04
position = 48617, 3000, 55549.7
pilot_job = assault_job
label = hostiles

[MsnNpc]
nickname = npc_Molly_battle_transport_02_01
npc = Molly_battle_transport_01
string_id = 0
;res str
; Battle Transport
system = Br04
position = 52557, 0, 55549.7
pilot_job = job_gunboat_a
label = hostiles

;; -- SOLARS --

;; Defender Base
[MsnSolar]
nickname = Defender_Base
string_id = 0
;res str
; Molly Base
archetype = mission_space_port_dmg
system = Br04
loadout = pi_loadout_solar_port_dmg01
position = 48617, 0, 55549.7
rotate = 0, 75, 0
faction = fc_m_grp
label = hostiles

;; ###############################
;; ---------FORMATIONS------------
;; ###############################

[MsnFormation]
nickname = AttackWing01
position = 44617, 0, 55549.7
orientation = 0, 0, 0, 0
formation = fighter_basic
ship = npc_police_cavalier_01
ship = npc_police_cavalier_02
ship = npc_police_cavalier_03
ship = npc_police_cavalier_04

[MsnFormation]
nickname = AttackWing02
position = 46320.3, 0, 53946.4
orientation = 0, 180, 0, 0
formation = fighter_basic
ship = npc_Armed_Forces_Crusader_01
ship = npc_Armed_Forces_Crusader_02
ship = npc_Armed_Forces_Crusader_03
ship = npc_Armed_Forces_Crusader_04
ship = npc_Armed_Forces_Crusader_05
ship = npc_Armed_Forces_Crusader_06

[MsnFormation]
nickname = DefenderWing01
position = 48213, 0, 56166
orientation = 0, 0, 0, 0
formation = delta_high
ship = npc_Molly_Wolfhound_m01_01
ship = npc_Molly_Wolfhound_m01_02
ship = npc_Molly_Wolfhound_m01_03
ship = npc_Molly_Wolfhound_m01_04
ship = npc_Molly_Wolfhound_m01_05
ship = npc_Molly_Wolfhound_m01_06
ship = npc_Molly_Wolfhound_m01_07
ship = npc_Molly_Wolfhound_m01_08

[MsnFormation]
nickname = DefenderWing02
position = 52098, 0, 56482
orientation = 0, 0, 0, 0
formation = delta_high
ship = npc_Molly_Foxhound01_m01_01
ship = npc_Molly_Foxhound01_m01_02
ship = npc_Molly_Foxhound01_m01_03
ship = npc_Molly_Foxhound01_m01_04
ship = npc_Molly_Foxhound01_m01_05
ship = npc_Molly_Foxhound01_m01_06
ship = npc_Molly_Foxhound01_m01_07
ship = npc_Molly_Foxhound01_m01_08

[MsnFormation]
nickname = DefenderWing03
position = 52617, 0, 55549.7
orientation = 0, 75, 0, 0
formation = delta_high
ship = npc_Molly_Wolfhound_m02_01
ship = npc_Molly_Wolfhound_m02_02
ship = npc_Molly_Wolfhound_m02_03

[MsnFormation]
nickname = DefenderWing04
position = 48617, 3000, 55549.7
orientation = -180, 15, 180, 0
formation = delta_high
ship = npc_Molly_Wolfhound_boss
ship = npc_Molly_Foxhound_escort01
ship = npc_Molly_Foxhound_escort02

;; ###############################
;; ------------DIALOGS------------
;; ###############################


;; Dialogs are currently no recognized from the parser, you need to fill ID´s yourself!
[Dialog]
nickname = dialog_entering_mission_zone
etherSender = MissionCommission, mc_leg_m01, 0, br_bartender_head, br_male_guard_body, 
;res str
; Mission Comission
etherSender = Attacker, pilot_f_leg_f01, 0, br_newscaster_head_gen_hat, br_female_guard_body, comm_br_kaitlyn_female
;res str
; Cpt. Smith
line = coms_entering_zone_attacker, players, Attacker, gcs_misc_thisis+, gcs_refer_faction_li_p_short, gcs_refer_formationdesig_02, gcs_misc_number_1-, gcs_combat_askforhelp_04-, 1.0, true
line = coms_entering_zone_mc, players, MissionCommission, rmb_canseeinstallation_01-, 0.1, false

[Dialog]
nickname = dialog_close_to_objective
line = coms_close_to_objective_attacker, players, npc_police_cavalier_01, gcs_combat_order_engage_02-, 0.5, true
line = coms_close_to_objective_defender, players, npc_Molly_Wolfhound_m01_01, rms_defendsolar_02-, 0.5, true

[Dialog]
nickname = dialog_reinforcements_defender01
etherSender = NeuralNet, NNVoice, 0
;res str
; Neural Net
line = coms_reinforcements_defender01, players, NeuralNet, warning, info_incoming_hostiles, 0.5, false

[Dialog]
nickname = dialog_reinforcements_defender02
etherSender = NeuralNet, NNVoice, 0
;res str
; Neural Net
line = coms_reinforcements_defender02, players, NeuralNet, warning, info_incoming_hostiles, 0.5, false

[Dialog]
nickname = dialog_reinforcements_defender03
etherSender = NeuralNet, NNVoice, 0
;res str
; Neural Net
line = coms_reinforcements_defender03, players, NeuralNet, warning, info_incoming_hostiles, 0.5, false

[Dialog]
nickname = dialog_reinforcements_defender04
etherSender = NeuralNet, NNVoice, 0
;res str
; Neural Net
line = coms_reinforcements_defender04, players, npc_Molly_Wolfhound_boss, rms_bigshiptaunt_03-, 0.5, false
line = coms_reinforcements_defender03, players, NeuralNet, danger, info_incoming_hostiles, 0.5, false

[Dialog]
nickname = dialog_reinforcements_attacker01
etherSender = Attacker2, pilot_f_mil_m02, 0, br_sales_head_hat, br_male_elite_body, comm_br_brighton
;res str
; Omega 1
line = coms_reinforcements_attacker01, players, Attacker2, gcs_combat_offerhelp_04-, 0.5, false

[Dialog]
nickname = dialog_mission_success
etherSender = MissionCommission, mc_leg_m01, 0, br_bartender_head, br_male_guard_body, 
;res str
; Mission Comission 
line = coms_mission_success_mc, players, MissionCommission, rmb_success_solar_01-, 0.1, false

[Dialog]
nickname = dialog_deserteurs_warning
etherSender = MissionCommission, mc_leg_m01, 0, br_bartender_head, br_male_guard_body, 
;res str
; Mission Comission
line = coms_deserteurs_mc, ACTIVATOR, MissionCommission, rmb_outofbattle_02-, 0.5, false

[Dialog]
nickname = dialog_deserteurs_returning
etherSender = MissionCommission, mc_leg_m01, 0, br_bartender_head, br_male_guard_body, 
;res str
; Mission Comission
line = coms_deserteurs_returning_mc, ACTIVATOR, MissionCommission, rmb_reenterbattle_02-, 0.5, false

[Dialog]
nickname = dialog_deserteurs_mission_fail
etherSender = MissionCommission, mc_leg_m01, 0, br_bartender_head, br_male_guard_body, 
;res str
; Mission Comission
line = coms_mission_success_mc, ACTIVATOR, MissionCommission, rmb_fail_combatrange_02-, 0.1, false

[Dialog]
nickname = dialog_mission_fail_dead
etherSender = MissionCommission, mc_leg_m01, 0, br_bartender_head, br_male_guard_body, 
;res str
; Mission Comission
line = coms_mission_failed, dead, MissionCommission, rmb_fail_outoflives_02-, 0.1, false


;; ###############################
;; --------OBJECTIVE LISTS--------
;; ###############################

;; Fly to Mission Zone
[ObjList]
nickname = ol_fly_to_mission_zone
GotoVec = goto_cruise, 48617, 0, 55549.7, 1500, -1
BreakFormation = no_params

[ObjList]
nickname = ol_fly_to_mission_zone_bomber
GotoVec = goto_cruise, 48617, 0, 55549.7, 4000, -1
BreakFormation = no_params

[ObjList]
nickname = ol_back_to_base
GotoVec = goto_cruise, 50655, 0, -77595, 2000, -1

;; ###############################
;; -------TRIGGER SECTION---------
;; ###############################

;; -------------------------------
;; AFTER ACCEPTING MISSION
;; -------------------------------

;; Start of Mission
[Trigger]
nickname = start_mission
initstate = ACTIVE
Act_ActTrig = start_players_on_base
Act_AddLabel = players, alive

;; Detecting Players docked on bases
[Trigger]
nickname = start_players_on_base
Cnd_OnBase = players
Act_AddLabel = ACTIVATOR, Start_On_base
Act_SetNNObj = Start_On_base, 0, Br04, 48617, 0, 55549.7, false
;res str
; Launch To Space!

[Trigger]
nickname = start_mission_entering_space
initstate = ACTIVE
repeatable = Auto
Cnd_DistVec = Start_On_base, 0, 0, 0, 100000, Br04, INSIDE
Act_SetNNObj = ACTIVATOR, 0, Br04, 48617, 0, 55549.7, true
;res str
; Fly to the Mission Waypoint (Leeds, Sector 6F)
Act_AddLabel = ACTIVATOR, Launching
Act_RemoveLabel = ACTIVATOR, Start_On_base
Act_ActTrig = start_mission_entering_space_mc_dialog

[Trigger]
nickname = start_mission_entering_space_mc_dialog
repeatable = Manual
Cnd_Timer = 12
Act_EtherComm = coms_misison_update, Launching, mc_leg_m01, rmb_targetatwaypoint_01-, 0, false, 0, br_bartender_head, br_male_guard_body
;res str
; Mission Comission
Act_RemoveLabel = Launching, Launching

;; Mission Update for Players already in Space
[Trigger]
nickname = start_players_in_space
initstate = ACTIVE
Cnd_DistVec = players, 0, 0, 0, 100000, Br04, INSIDE
Act_SetNNObj = ACTIVATOR, 0, Br04, 48617, 0, 55549.7, true
;res str
; Fly to the Mission Waypoint (Dresden, Sector 6F)
Act_EtherComm = coms_misison_update_in_space, ACTIVATOR, mc_leg_m01, rmb_targetatwaypoint_01-, 0, false, 0, br_bartender_head, br_male_guard_body
;res str
; Mission Comission

;; -------------------------------
;; ENTERING MISSION ZONE
;; -------------------------------

[Trigger]
nickname = entering_mission_zone
initstate = ACTIVE
Cnd_DistVec = players, 48617, 0, 55549.7, 10000, Br04, INSIDE
; Spawn NPC´s
Act_SpawnFormation = AttackWing01
Act_SpawnFormation = DefenderWing01
; Order NPC´s to fly to Mission Zone
; - Attacker
Act_GiveObjList = npc_police_cavalier_01, ol_fly_to_mission_zone
Act_GiveObjList = npc_police_cavalier_02, ol_fly_to_mission_zone
Act_GiveObjList = npc_police_cavalier_03, ol_fly_to_mission_zone
Act_GiveObjList = npc_police_cavalier_04, ol_fly_to_mission_zone
; - Defender
Act_GiveObjList = npc_Molly_Wolfhound_m01_01, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m01_02, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m01_03, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m01_04, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m01_05, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m01_06, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m01_07, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m01_08, ol_fly_to_mission_zone
; Spawn Solars
Act_SpawnSolar = Defender_Base
; Change Music
Act_PlayMusic = players, music_br_space, music_br_danger, music_br_battle, music_br_danger, 1, true
; Start Dialog
Act_StartDialog = dialog_entering_mission_zone
Act_ActTrig = close_to_mission_zone
; Spawn Battle Transports (50% Chance)
Act_ActTrig = spawn_first_battle_transports, 0.5
; Spawn Combat Train (50% Chance)
Act_ActTrig = spawn_first_combat_train, 0.5
Act_ActTrig = Player_kia_in_Zone
Act_ActTrig = Player_kia_launching
Act_ActTrig = Player_kia_returning
Act_ActTrig = make_invulnerable

[Trigger]
nickname = make_invulnerable
Cnd_True = no_params
Act_Invulnerable = npc_police_cavalier_01, true, true, 0.75
Act_Invulnerable = npc_Molly_Wolfhound_m01_01, true, true, 0.75

;; -------------------------------
;; CLOSE TO OBJECTIVE
;; -------------------------------

[Trigger]
nickname = close_to_mission_zone
Cnd_DistVec = players, 48617, 0, 55549.7, 3000, Br04, INSIDE
; Start Dialog
Act_StartDialog = dialog_close_to_objective
; Update Waypoint
Act_SetNNObj = players, 0, Br04, 48617, 0, 55549.7, false, Defender_Base
;res str
; Destroy Molly Base and Ships
Act_PlayMusic = players, music_br_space, music_br_danger, music_br_battle, music_reveal_enemy_position_of_strength, 1, true
; Activate Checks for Deserteurs
Act_AddLabel = players, Not_Heard_Warning
Act_ActTrig = deserteurs_warning
Act_ActTrig = deserteurs_warning_returning
Act_ActTrig = deserteurs_flew_away
Act_ActTrig = Player_lives_4
Act_ActTrig = Mission_Objective_failed_No_Players
Act_ActTrig = Mission_Objective_Complete
Act_ActTrig = spawn_first_wave
Act_ActTrig = spawn_second_wave
; Boss spawn (25% chance)
Act_ActTrig = spawn_boss_wave, 0.25
; Additional Attacker spawn (50%)
Act_ActTrig = spawn_second_attacker_wave, 0.5
; Make NPC´s stay in Combat Zone if no target nearby
Act_ActTrig = send_defender_back
Act_ActTrig = send_boss_back
Act_ActTrig = send_attackers_back
Act_DeactTrig = start_mission_entering_space
Act_ActTrig = make_vulnerable

[Trigger]
nickname = make_vulnerable
Cnd_Timer = 20
Act_Invulnerable = npc_police_cavalier_01, false, false, 0.0
Act_Invulnerable = npc_Molly_Wolfhound_m01_01, false, false, 0.0

;; -------------------------------
;; Dynamic waves (50%)
;; -------------------------------

;; Battle Transports
[Trigger]
nickname = spawn_first_battle_transports
Cnd_True = no_params
Act_SpawnShip = npc_Molly_battle_transport_01_01, ol_fly_to_mission_zone
Act_SpawnShip = npc_Molly_battle_transport_01_02, ol_fly_to_mission_zone

;; Combat train
[Trigger]
nickname = spawn_first_combat_train
Cnd_True = no_params
Act_SpawnShip = npc_Molly_combat_train_01_01, ol_fly_to_mission_zone

;; -------------------------------
;; SPAWN REINFORCEMENTS 
;; -------------------------------

;; First Wave
[Trigger]
nickname = spawn_first_wave
Cnd_Destroyed = hostiles, 5
Act_SpawnFormation = DefenderWing02
Act_ActTrig = Set_first_wave_OL
Act_StartDialog = dialog_reinforcements_defender02

[Trigger]
nickname = Set_first_wave_OL
Cnd_True = no_params
Act_GiveObjList = npc_Molly_Foxhound01_m01_01, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound01_m01_02, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound01_m01_03, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound01_m01_04, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound01_m01_05, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound01_m01_06, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound01_m01_07, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound01_m01_08, ol_fly_to_mission_zone

;; Second Wave
[Trigger]
nickname = spawn_second_wave
Cnd_Destroyed = hostiles, 9
Act_SpawnFormation = DefenderWing03
Act_ActTrig = Set_second_wave_OL
Act_StartDialog = dialog_reinforcements_defender03
Act_SpawnShip = npc_Molly_combat_train_02_01, ol_fly_to_mission_zone

[Trigger]
nickname = Set_second_wave_OL
Cnd_True = no_params
Act_GiveObjList = npc_Molly_Wolfhound_m02_01, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m02_02, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Wolfhound_m02_03, ol_fly_to_mission_zone

;; Boss (25% Chance)
[Trigger]
nickname = spawn_boss_wave
Cnd_Destroyed = hostiles, 13
Act_SpawnFormation = DefenderWing04
Act_ActTrig = Set_boss_wave_OL
Act_StartDialog = dialog_reinforcements_defender04
Act_ActTrig = Bonus_Bounty
Act_SpawnShip = npc_Molly_battle_transport_02_01, ol_fly_to_mission_zone

[Trigger]
nickname = Set_boss_wave_OL
Cnd_True = no_params
Act_GiveObjList = npc_Molly_Wolfhound_boss, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound_escort01, ol_fly_to_mission_zone
Act_GiveObjList = npc_Molly_Foxhound_escort02, ol_fly_to_mission_zone

;; Second Attacke Wave (50% Chance)
[Trigger]
nickname = spawn_second_attacker_wave
Cnd_Timer = 60
Act_SpawnFormation = AttackWing02
Act_ActTrig = Set_second_attackerwave_OL
Act_StartDialog = dialog_reinforcements_attacker01

[Trigger]
nickname = Set_second_attackerwave_OL
Cnd_True = no_params
Act_GiveObjList = npc_Armed_Forces_Crusader_01, ol_fly_to_mission_zone_bomber
Act_GiveObjList = npc_Armed_Forces_Crusader_02, ol_fly_to_mission_zone_bomber
Act_GiveObjList = npc_Armed_Forces_Crusader_03, ol_fly_to_mission_zone_bomber
Act_GiveObjList = npc_Armed_Forces_Crusader_04, ol_fly_to_mission_zone_bomber
Act_GiveObjList = npc_Armed_Forces_Crusader_05, ol_fly_to_mission_zone_bomber
Act_GiveObjList = npc_Armed_Forces_Crusader_06, ol_fly_to_mission_zone_bomber

;; -------------------------------
;; PULL NPC´s BACK IF OUTSIDE
;; -------------------------------

[Trigger]
nickname = send_defender_back
repeatable = Auto
Cnd_DistVec = hostiles, 48617, 0, 55549.7, 6000, Br04, OUTSIDE
Act_GiveObjList = ACTIVATOR, ol_fly_to_mission_zone

[Trigger]
nickname = send_boss_back
repeatable = Auto
Cnd_DistVec = Boss , 48617, 0, 55549.7, 6000, Br04, OUTSIDE
Act_GiveObjList = ACTIVATOR, ol_fly_to_mission_zone

[Trigger]
nickname = send_attackers_back
repeatable = Auto
Cnd_DistVec = allies, 48617, 0, 55549.7, 6000, Br04, OUTSIDE
Act_GiveObjList = ACTIVATOR, ol_fly_to_mission_zone

;; -------------------------------
;; DESERTEURS (WARNING)
;; -------------------------------

;; Player is about to leave the Mission Area!
[Trigger]
nickname = deserteurs_warning
repeatable = Auto
Cnd_DistVec = Not_Heard_Warning, 48617, 0, 55549.7, 7500, Br04, OUTSIDE
Act_StartDialog = dialog_deserteurs_warning
Act_SetNNObj = ACTIVATOR, 0, Br04, 48617, 0, 55549.7
;res str
; Warning - Leaving Combat Area!
Act_AddLabel = ACTIVATOR, Heard_Warning
Act_RemoveLabel = ACTIVATOR, Not_Heard_Warning

;; Player is returning to Mission Area!
[Trigger]
nickname = deserteurs_warning_returning
repeatable = Auto
Cnd_DistVec = Heard_Warning, 48617, 0, 55549.7, 4000, Br04, INSIDE
Act_AddLabel = ACTIVATOR, Not_Heard_Warning
Act_RemoveLabel = ACTIVATOR, Heard_Warning
Act_StartDialog = dialog_deserteurs_returning
Act_SetNNObj = ACTIVATOR, 0, Br04, 48617, 0, 55549.7, false, Defender_Base
;res str
; Destroy Molly Base and Ships

;; -------------------------------
;; DESERTEURS (MISSION FAILURE)
;; -------------------------------

[Trigger]
nickname = deserteurs_flew_away
repeatable = Auto
Cnd_DistVec = Heard_Warning, 48617, 0, 55549.7, 12000, Br04, OUTSIDE
Act_StartDialog = dialog_deserteurs_mission_fail
Act_AdjRep = ACTIVATOR, br_p_grp, MissionFailure
Act_LeaveMsn = ACTIVATOR, Failure, 21970

;; -------------------------------
;; PLAYER KIA INSIDE MISSION AREA
;; -------------------------------

;; Player died in Mission Area!
[Trigger]
nickname = Player_kia_in_Zone
repeatable = Auto
Cnd_Destroyed = alive, 1, Explode, , Destroyed
Act_RemoveLabel = ACTIVATOR, Not_Heard_Warning
Act_RemoveLabel = ACTIVATOR, Heard_Warning
Act_RemoveLabel = ACTIVATOR, alive
Act_AddLabel = ACTIVATOR, dead

;; Dead Player is launching
[Trigger]
nickname = Player_kia_launching
repeatable = Auto
Cnd_SystemEnter = dead, Br04
Act_SetNNObj = ACTIVATOR, 0, Br04, 48617, 0, 55549.7, true
;res str
; Fly to the Mission Waypoint (Leeds, Sector 6F)

;; Dead Player is returning to Mission Area!
[Trigger]
nickname = Player_kia_returning
repeatable = Auto
Cnd_DistVec = dead, 48617, 0, 55549.7, 5000, Br04, INSIDE
Act_AddLabel = ACTIVATOR, Heard_Warning
Act_AddLabel = ACTIVATOR, alive
Act_RemoveLabel = ACTIVATOR, dead

;; -------------------------------
;; LIVES COUNTING
;; -------------------------------

[Trigger]
nickname = Player_lives_4
Cnd_Destroyed = alive, 1, Explode
Act_SetNNObj = players, 0
;res str
; Allied Ship Lost! - 4 Left
Act_ActTrig = Player_lives_3

[Trigger]
nickname = Player_lives_3
Cnd_Destroyed = alive, 1, Explode
Act_SetNNObj = players, 0
;res str
; Allied Ship Lost! - 3 Left
Act_ActTrig = Player_lives_2

[Trigger]
nickname = Player_lives_2
Cnd_Destroyed = alive, 1, Explode
Act_SetNNObj = players, 0
;res str
; Allied Ship Lost! - 2 Left
Act_ActTrig = Player_lives_1

[Trigger]
nickname = Player_lives_1
Cnd_Destroyed = alive, 1, Explode
Act_SetNNObj = players, 0
;res str
; Allied Ship Lost! - 1 Left
Act_ActTrig = Mission_Objective_failed_No_Lives

;; -------------------------------
;; OUT OF LIVES! (MISSION FAILED)
;; -------------------------------

[Trigger]
nickname = Mission_Objective_failed_No_Lives
Cnd_Destroyed = alive, 1, Explode
Act_SetNNObj = players, 0
;res str
; All Ships Lost!
Act_StartDialog = dialog_mission_fail_dead
Act_LeaveMsn = players, Failure, 21970
Act_AdjRep = players, br_p_grp, MissionFailure
Act_SetMsnResult = Failure
Act_LeaveMsn = players, Failure, 21970
Act_ActTrig = Cleaning_up_repeatables

;; -------------------------------
;; NO PLAYERS IN MISSION ZONE (MISSION FAILED)
;; -------------------------------

; [Trigger]
; nickname = Mission_Objective_failed_No_Players
; Cnd_Destroyed = alive, -1
; Act_StartDialog = dialog_mission_fail_dead
; Act_SetMsnResult = Failure
; Act_LeaveMsn = players, Failure, 21970
; Act_ActTrig = Cleaning_up_repeatables

;; -------------------------------
;; MISSION OBJECTIVE (MISSION COMPLETE)
;; -------------------------------

[Trigger]
nickname = Mission_Objective_Complete
Cnd_Destroyed = hostiles, -1
Act_StartDialog = dialog_mission_success
Act_AdjAcct = players, 20000000, true
Act_AdjRep = players, br_p_grp, 0.25
Act_SetMsnResult = Success
Act_LeaveMsn = players, Success, 1231
Act_ActTrig = Cleaning_up_repeatables

;; -------------------------------
;; MISSION OBJECTIVE (BONUS)
;; -------------------------------

[Trigger]
nickname = Bonus_Bounty
Cnd_Destroyed = Boss, -1
Act_AdjAcct = players, 2000000, true
Act_SetNNObj = players, 0
;res str
; Bounty Received

;; -------------------------------
;; CLEANING UP
;; -------------------------------

[Trigger]
nickname = Cleaning_up_repeatables
Cnd_True = no_params
Act_DeactTrig = deserteurs_warning
Act_DeactTrig = deserteurs_warning_returning
Act_DeactTrig = deserteurs_flew_away
Act_DeactTrig = start_mission_entering_space
Act_DeactTrig = start_mission_mission_update
Act_DeactTrig = Player_kia_in_Zone
Act_DeactTrig = Player_kia_launching
Act_DeactTrig = Player_kia_returning
Act_ActTrig = end_mission_delayed

;; ###############################
;; ---------END SECTION-----------
;; ###############################

;; Delayed Mission End (30s)
[Trigger]
nickname = end_mission_delayed
Cnd_Timer = 30
Act_TerminateMsn = no_params
