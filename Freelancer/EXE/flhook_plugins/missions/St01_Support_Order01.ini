[Mission]
nickname = St01_Support_Order_Mission01
initstate = ACTIVE

;;Labels
; nomads - all Nomad vessels
; order - all order fighters
; players_heard_request - Players who reveived the call for help
; players_coming_in - Players inbound Target Area
; players_in_mission - Players inside Target Area
; deserteurs - Players who left the Combat Area or died
; players_out_mission - Players who are out of Range of the Target Area
; players_heard_warning - Player heard warning for leaving combat area
; kia - Player died inside combat area
; mia - Player died outside combat area

;; ###############################
;; ---- NPC AND SOLAR SECTION ----
;; ###############################

; Nomad Big Target

[Npc]
nickname = nomad_battleship
archetype = no2_battleship
loadout = fc_n_no2_battleship
faction = fc_n_grp
state_graph = CRUISER
pilot = battleship_default
level = 60

[MsnNpc]
nickname = npc_nomad_battleship
npc = nomad_battleship
string_id = 460231
system = St01
position = -11531.8, 40, 18254.9
label = nomads
hitpoints = 375000

; Nomad Initial Defenders, Spawning next to the big Target

[Npc]
nickname = npc_nomad_fighter01
archetype = no2_elite
loadout = fc_n_no2_elite
faction = fc_n_grp
state_graph = FIGHTER
pilot = pilot_outcast_ace
level = 7

[MsnNpc]
nickname = npc_first_fighter01
npc = npc_nomad_fighter01
system = St01
position = -11675.5, 112.7, 18407.5
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_first_fighter02
npc = npc_nomad_fighter01
system = St01
position = -11675.5, 112.7, 18407.5
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_first_fighter03
npc = npc_nomad_fighter01
system = St01
position = -11443.2, 112.7, 18317.4
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_first_fighter04
npc = npc_nomad_fighter01
system = St01
position = -11400.9, -10.6, 18254.9
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_first_fighter05
npc = npc_nomad_fighter01
system = St01
position = -11602.7, -59.1, 18096.8
pilot_job = story_job_fighter_a
label = nomads

; Nomad Support
;; Nomad Reinforcemence, arriving after taking some loses

[MsnNpc]
nickname = npc_second_wave01
npc = npc_nomad_fighter01
system = St01
position = -14428.9, 10, 20112.3
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_second_wave02
npc = npc_nomad_fighter01
system = St01
position = -14428.9, 20, 20112.3
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_second_wave03
npc = npc_nomad_fighter01
system = St01
position = -14408.9, 40, 20112.3
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_second_wave04
npc = npc_nomad_fighter01
system = St01
position = -14418.9, 40, 20112.3
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_second_wave05
npc = npc_nomad_fighter01
system = St01
position = -14438.9, 40, 20112.3
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_second_wave06
npc = npc_nomad_fighter01
system = St01
position = -14428.9, 40, 20112.3
pilot_job = story_job_fighter_a
label = nomads

[MsnFormation]
nickname = NomadSecondWave
position = -14428.9, 40, 20112.3
orientation = 0, 270, 0
formation = nomad_swarm
ship = npc_second_wave01
ship = npc_second_wave02
ship = npc_second_wave03
ship = npc_second_wave04
ship = npc_second_wave05
ship = npc_second_wave06

[MsnNpc]
nickname = npc_third_wave01
npc = npc_nomad_fighter01
system = St01
position = -9331, 10, 20799.1
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_third_wave02
npc = npc_nomad_fighter01
system = St01
position = -9331, 20, 20799.1
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_third_wave03
npc = npc_nomad_fighter01
system = St01
position = -9331, 40, 20779.1
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_third_wave04
npc = npc_nomad_fighter01
system = St01
position = -9301, 40, 20799.1
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_third_wave05
npc = npc_nomad_fighter01
system = St01
position = -9321, 40, 20799.1
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_third_wave06
npc = npc_nomad_fighter01
system = St01
position = -9331, 40, 20799.1
pilot_job = story_job_fighter_a
label = nomads

[MsnFormation]
nickname = NomadThirdWave
position = -9331, 40, 20799.1
orientation = 0, 20, 0
formation = nomad_swarm
ship = npc_third_wave01
ship = npc_third_wave02
ship = npc_third_wave03
ship = npc_third_wave04
ship = npc_third_wave05
ship = npc_third_wave06

[MsnNpc]
nickname = npc_fourth_wave01
npc = npc_nomad_fighter01
system = St01
position = -9695.7, 0, 14758.7
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_fourth_wave02
npc = npc_nomad_fighter01
system = St01
position = -9695.7, 40, 14798.7
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_fourth_wave03
npc = npc_nomad_fighter01
system = St01
position = -9695.7, 40, 14738.7
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_fourth_wave04
npc = npc_nomad_fighter01
system = St01
position = -9695.7, 40, 14778.7
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_fourth_wave05
npc = npc_nomad_fighter01
system = St01
position = -9675.7, 40, 14758.7
pilot_job = story_job_fighter_a
label = nomads

[MsnNpc]
nickname = npc_fourth_wave06
npc = npc_nomad_fighter01
system = St01
position = -9685.7, 40, 14758.7
pilot_job = story_job_fighter_a
label = nomads

[MsnFormation]
nickname = NomadFourthWave
position = -9695.7, 40, 14758.7
orientation = 0, 0, 0
formation = nomad_swarm
ship = npc_fourth_wave01
ship = npc_fourth_wave02
ship = npc_fourth_wave03
ship = npc_fourth_wave04
ship = npc_fourth_wave05
ship = npc_fourth_wave06

; Order Alpha Wing
;; First Responder Wing

[Npc]
nickname = order_alpha01
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_c
faction = fc_or_grp
state_graph = FIGHTER
space_costume = li_captain_head, li_male_elite_body, comm_rh_reichman
voice = pilot_f_mil_m02
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_alpha02
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_c
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_f_leg_m01b
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_alpha03
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_c
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_f_ill_m02
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_alpha04
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_c
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_c_ill_f01a
pilot = pilot_military_ace
level = 5

[MsnNpc]
nickname = npc_order_alpha01
npc = order_alpha01
string_id = 0
;res str
; Alpha 1
system = St01
position = -15280.2, 156.4, 15965.4
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_alpha02
npc = order_alpha02
string_id = 0
;res str
; Alpha 2
system = St01
position = -15303.2, 156.4, 15990.3
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_alpha03
npc = order_alpha03
string_id = 0
;res str
; Alpha 3
system = St01
position = -15263.6, 156.4, 15939.2
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_alpha04
npc = order_alpha04
string_id = 0
;res str
; Alpha 4
system = St01
position = -15261.2, 156.4, 15908.3
pilot_job = story_job_fighter_a
label = order

[MsnFormation]
nickname = AlphaWing
position = -15243.3, 156.4, 15996.8
orientation = 0, 40, 18254.9, 0
formation = fighter_basic
ship = npc_order_alpha01
ship = npc_order_alpha02
ship = npc_order_alpha03
ship = npc_order_alpha04

; Order Beta Wing
;; Wing that Requests for Backups and spawns near the Target

[Npc]
nickname = order_beta01
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_b
faction = fc_or_grp
state_graph = FIGHTER
space_costume = pl_female2_head, li_female_elite_body, comm_br_brighton_female
voice = pilot_f_leg_f01
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_beta02
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_b
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_c_ill_f01
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_beta03
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_b
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_f_mil_m01
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_beta04
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_b
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_f_ill_m02
pilot = pilot_military_ace
level = 5

[MsnNpc]
nickname = npc_order_beta01
npc = order_beta01
string_id = 0
;res str
; Beta 1
system = St01
position = -12122.9, 156.4, 20534.3
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_beta02
npc = order_beta02
string_id = 0
;res str
; Beta 2
system = St01
position = -12150.6, 156.4, 20542.8
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_beta03
npc = order_beta03
string_id = 0
;res str
; Beta 3
system = St01
position = -12094.7, 156.4, 20525.6
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_beta04
npc = order_beta04
string_id = 0
;res str
; Beta 4
system = St01
position = -12062.1, 156.4, 20552
pilot_job = story_job_fighter_a
label = order

[MsnFormation]
nickname = BetaWing
position = -12130.2, 156.4, 20510.6
orientation = 0, 160, 0
formation = fighter_basic
ship = npc_order_beta01
ship = npc_order_beta02
ship = npc_order_beta03
ship = npc_order_beta04

; Order Lambda Wing
;; Third reinforcements wave

[Npc]
nickname = order_lambda01
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_d
faction = fc_or_grp
state_graph = FIGHTER
space_costume = li_rockford_head, li_male_elite_body, comm_br_darcy
voice = pilot_f_mil_m01
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_lambda02
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_d
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_c_ill_f01
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_lambda03
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_d
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_f_leg_f01
pilot = pilot_military_ace
level = 5

[Npc]
nickname = order_lambda04
archetype = or_ship_fighter_heavy01_npc
loadout = Order_Heavy_Fighter_d5_d
faction = fc_or_grp
state_graph = FIGHTER
voice = pilot_f_mil_m02
pilot = pilot_military_ace
level = 5

[MsnNpc]
nickname = npc_order_lambda01
npc = order_lambda01
string_id = 0
;res str
; Lambda 1
system = St01
position = -15280.2, 156.4, 15965.4
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_lambda02
npc = order_lambda02
string_id = 0
;res str
; Lambda 2
system = St01
position = -15303.2, 156.4, 15990.3
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_lambda03
npc = order_lambda03
string_id = 0
;res str
; Lambda 3
system = St01
position = -15263.6, 156.4, 15939.2
pilot_job = story_job_fighter_a
label = order

[MsnNpc]
nickname = npc_order_lambda04
npc = order_lambda04
string_id = 0
;res str
; Lambda 4
system = St01
position = -15261.2, 156.4, 15908.3
pilot_job = story_job_fighter_a
label = order

[MsnFormation]
nickname = LambdaWing
position = -15243.3, 156.4, 15996.8
orientation = -11531.8, 40, 18254.9, 0.049698
formation = fighter_basic
ship = npc_order_lambda01
ship = npc_order_lambda02
ship = npc_order_lambda03
ship = npc_order_lambda04

;; #########################
;; ---- Objective Lists ----
;; ######################### 

[ObjList]
nickname = ol_attackers
GotoVec = goto_cruise, -11531.8, 40, 18254.9, 1000, -1

[ObjList]
nickname = ol_survivors_formup_alpha
MakeNewFormation = fighter_basic, npc_order_alpha02, npc_order_alpha03, npc_order_alpha04

[ObjList]
nickname = ol_survivors_formup_beta
MakeNewFormation = fighter_basic, npc_order_beta02, npc_order_beta03, npc_order_beta04

[ObjList]
nickname = ol_survivors_formup_lamdba
MakeNewFormation = fighter_basic, npc_order_lambda02, npc_order_lambda03, npc_order_lambda04

[ObjList]
nickname = ol_back_to_toledo
GotoVec = goto_cruise, -22861.4, 0, -6285.9, 500, -1

;; ######################### 
;; ----	Trigger Section ----
;; ######################### 

;; Igonoring the Mission

[Trigger]
nickname = passer_bys_flew_away
initstate = ACTIVE
repeatable = Auto
Cnd_DistVec = players_heard_request, -11531.8, 40, 18254.9, 30000, St01, OUTSIDE
Act_SetNNObj = ACTIVATOR, 0
;res str
; You Ignored the Request!
Act_RemoveLabel = ACTIVATOR, players_heard_request

[Trigger]
nickname = passer_bys_landed
initstate = ACTIVE
repeatable = Auto
Cnd_BaseEnter = players_heard_request
Act_SetNNObj = ACTIVATOR, 0
;res str
; You Ignored the Request!
Act_RemoveLabel = ACTIVATOR, players_heard_request

;; Leaving Combat Area while Mission Active

[Trigger]
nickname = deserteurs_warning_flew_away
repeatable = Manual
Cnd_DistVec = players_out_mission, -11531.8, 40, 18254.9, 15000, St01, OUTSIDE
Act_EtherComm = coms_nn_warning_leaving_ca, ACTIVATOR, NNVoice, nag_dst_ship_01-, 1, false, 0, , 
;res str
; Neural Net
Act_SetNNObj = ACTIVATOR, 0, ST01, -11531.8, 40, 18254.9, false
;res str
; Warning - Leaving Combat Area!
Act_AddLabel = ACTIVATOR, players_heard_warning
Act_RemoveLabel = ACTIVATOR, players_out_mission

[Trigger]
nickname = deserteurs_flew_away
repeatable = Auto
Cnd_DistVec = players_heard_warning, -11531.8, 40, 18254.9, 20000, St01, OUTSIDE
Act_SetNNObj = ACTIVATOR, 21970
Act_PlayMusic = ACTIVATOR, none, none, none, music_failure, 0, true
Act_AddLabel = ACTIVATOR, deserteurs
Act_RemoveLabel = deserteurs, players_coming_in
Act_RemoveLabel = deserteurs, players_in_mission
Act_RemoveLabel = deserteurs, players_out_mission
Act_RemoveLabel = deserteurs, players_heard_warning
Act_EtherComm = coms_beta_deserteurs, ACTIVATOR, pilot_f_leg_f01, gcs_scan_angry_02-, 1, false, 462007, pl_female2_head, li_female_elite_body, comm_br_brighton_female

[Trigger]
nickname = deserteurs_landed
repeatable = Auto
Cnd_BaseEnter = players_heard_warning
Act_SetNNObj = ACTIVATOR, 21970
Act_PlayMusic = ACTIVATOR, none, none, none, music_failure, 0, true
Act_AddLabel = ACTIVATOR, deserteurs
Act_RemoveLabel = deserteurs, players_coming_in
Act_RemoveLabel = deserteurs, players_in_mission
Act_RemoveLabel = deserteurs, players_out_mission
Act_RemoveLabel = deserteurs, players_heard_warning

[Trigger]
nickname = Player_died
repeatable = Auto
Cnd_BaseEnter = players_in_mission
Act_SetNNObj = ACTIVATOR, 21970
Act_PlayMusic = ACTIVATOR, none, none, none, music_failure, 0, true
Act_AddLabel = ACTIVATOR, kia
Act_RemoveLabel = ACTIVATOR, players_coming_in
Act_RemoveLabel = ACTIVATOR, players_in_mission
Act_RemoveLabel = ACTIVATOR, players_out_mission
Act_RemoveLabel = ACTIVATOR, players_heard_warning
Act_ActTrig = no_active_players_left

[Trigger]
nickname = Player_died_outside
repeatable = Auto
Cnd_BaseEnter = players_out_mission
Act_SetNNObj = ACTIVATOR, 21970
Act_PlayMusic = ACTIVATOR, none, none, none, music_failure, 0, true
Act_AddLabel = ACTIVATOR, mia
Act_RemoveLabel = ACTIVATOR, players_coming_in
Act_RemoveLabel = ACTIVATOR, players_in_mission
Act_RemoveLabel = ACTIVATOR, players_out_mission
Act_RemoveLabel = ACTIVATOR, players_heard_warning

;; Initial start of Mission (Help Request)

[Trigger]
nickname = call_for_support
repeatable = Auto
initstate = ACTIVE
Cnd_DistVec = STRANGER, -11531.8, 40, 18254.9, 15000, St01, INSIDE
Act_AddLabel = ACTIVATOR, players_heard_request
Act_SetNNObj = ACTIVATOR, 0, ST01, -11531.8, 40, 18254.9, false
;res str
; Receive Request for Backup
Act_ActTrig = start_dialog_intro
Act_ActTrig = initial_spawn

;; Start of Mission after initialization

[Trigger]
nickname = call_for_support_after_init
repeatable = Auto
Cnd_DistVec = STRANGER, -11531.8, 40, 18254.9, 15000, St01, INSIDE
Act_AddLabel = ACTIVATOR, players_out_mission
Act_SetNNObj = ACTIVATOR, 0, ST01, -11531.8, 40, 18254.9, false
;res str
; Receive Request for Backup
Act_ActTrig = start_dialog_intro_after_init

;; Start first Dialog

[Trigger]
nickname = start_dialog_intro
repeatable = Manual
Cnd_True = no_params
Act_StartDialog = dialog_intro

[Dialog]
nickname = dialog_intro
etherSender = NeuralNet, NNVoice, 0
;res str
; Neural Net
etherSender = Alpha_Leader, pilot_f_mil_m02, 0, li_captain_head, li_male_elite_body, comm_rh_reichman
;res str
; Alpha 1
etherSender = Beta_Leader, pilot_f_leg_f01, 0, pl_female2_head, li_female_elite_body, comm_br_brighton_female
;res str
; Beta 1
line = coms_beta_call_for_help, players_heard_request, Beta_Leader, gcs_combat_askforhelp_03-, 0.5, false
line = coms_alpha_answers_call, players_heard_request, Alpha_Leader, gcs_combat_comingin_p_03-, 0.5, false
line = coms_nn_mission_update_waypoint, players_heard_request, NeuralNet, mission_data_received, amsn_accepted, 0.5, false

;; Start first Dialog after init

[Trigger]
nickname = start_dialog_intro_after_init
repeatable = Manual
Cnd_True = no_params
Act_StartDialog = dialog_intro_after_init

[Dialog]
nickname = dialog_intro_after_init
etherSender = NeuralNet, NNVoice, 462020
etherSender = Beta_Leader, pilot_f_leg_f01, 462007, pl_female2_head, li_female_elite_body, comm_br_brighton_female
line = coms_beta_call_for_help_ai, players_out_mission, Beta_Leader, gcs_combat_askforhelp_03-, 0.5, false
line = coms_nn_mission_update_waypoint_ai, players_out_mission, NeuralNet, mission_data_received, amsn_accepted, 0.5, false

;; Spawn initial Content

[Trigger]
nickname = initial_spawn
Cnd_DistVec = players_heard_request, -11531.8, 40, 18254.9, 14000, St01, INSIDE
Act_ActTrig = spawn_nomad_bs
Act_DeactTrig = call_for_support
Act_ActTrig = call_for_support_after_init

[Trigger]
nickname = spawn_nomad_bs
Cnd_DistVec = players_heard_request, -11531.8, 40, 18254.9, 7000, St01, INSIDE
Act_SpawnShip = npc_nomad_battleship
Act_SpawnFormation = AlphaWing
Act_SpawnFormation = BetaWing
Act_SpawnShip = npc_first_fighter01, no_ol
Act_SpawnShip = npc_first_fighter02, no_ol
Act_SpawnShip = npc_first_fighter03, no_ol
Act_SpawnShip = npc_first_fighter04, no_ol
Act_SpawnShip = npc_first_fighter05, no_ol
Act_ActTrig = send_nomads_back
Act_ActTrig = send_order_back
Act_ActTrig = missionzone_approached
Act_ActTrig = spawn_second_wave
Act_ActTrig = spawn_third_wave
Act_ActTrig = spawn_fourth_wave
Act_ActTrig = all_attackers_killed
Act_ActTrig = Set_initial_OL
Act_ActTrig = Order_Alpha_Beta_leader_Invulnerable

[Trigger]
nickname = Set_initial_OL
Act_GiveObjList = npc_order_alpha01, ol_attackers
Act_GiveObjList = npc_order_alpha02, ol_attackers
Act_GiveObjList = npc_order_alpha03, ol_attackers
Act_GiveObjList = npc_order_alpha04, ol_attackers
Act_GiveObjList = npc_order_beta01, ol_attackers
Act_GiveObjList = npc_order_beta01, ol_attackers
Act_GiveObjList = npc_order_beta01, ol_attackers
Act_GiveObjList = npc_order_beta01, ol_attackers

[Trigger]
nickname = Order_Alpha_Beta_leader_Invulnerable
Cnd_True = no_params
Act_Invulnerable = npc_order_alpha01, true, true, 0.75
Act_Invulnerable = npc_order_beta01, true, true, 0.75

;; Entering Mission Area

[Trigger]
nickname = missionzone_approached
repeatable = Auto
Cnd_DistVec = players_heard_request, -11531.8, 40, 18254.9, 6000, St01, INSIDE
Act_AddLabel = ACTIVATOR, players_coming_in
Act_RemoveLabel = ACTIVATOR, players_heard_request
Act_ActTrig = deserteurs_warning_flew_away
Act_ActTrig = deserteurs_flew_away
Act_ActTrig = deserteurs_landed
Act_ActTrig = missionzone_re_approached
Act_ActTrig = Player_died
Act_ActTrig = Player_died_outside
Act_PlayMusic = players_coming_in, music_omicron_danger, music_reveal_enemy_position_of_strength, music_no_lair_battle, music_reveal_enemy_position_of_strength, 1, false
Act_ActTrig = missionzone_reached

[Trigger]
nickname = missionzone_reached
repeatable = Auto
Cnd_DistVec = players_coming_in, -11531.8, 40, 18254.9, 3000, St01, INSIDE
Act_SetNNObj = ACTIVATOR, 0
;res str
; Destroy all Nomad Ships!
Act_AddLabel = ACTIVATOR, players_in_mission
Act_RemoveLabel = ACTIVATOR, players_coming_in
Act_ActTrig = start_dialog_mission_zone
Act_ActTrig = assign_out_mission_label
Act_ActTrig = no_active_players_left
Act_ActTrig = assign_in_mission_label
Act_ActTrig = active_players_in_zone
Act_PlayMusic = players_in_mission, music_omicron_danger, music_reveal_enemy_position_of_strength, music_no_lair_battle, none, 2, false

[Trigger]
nickname = start_dialog_mission_zone
Cnd_True = no_params
Act_StartDialog = dialog_mission_zone

[Dialog]
nickname = dialog_mission_zone
line = coms_alpha_engages, players_in_mission, npc_order_alpha01, DX_M13_0200_ALPHA_LEADER, 0.5, false
line = coms_beta_reaction, players_in_mission, npc_order_beta01, rms_friendlywelcome_03-, 0.5, false

;; Re-Approaching Combat Area

[Trigger]
nickname = missionzone_re_approached
repeatable = Auto
Cnd_DistVec = players_heard_warning, -11531.8, 40, 18254.9, 10000, St01, INSIDE
Act_AddLabel = ACTIVATOR, players_in_mission
Act_RemoveLabel = ACTIVATOR, players_heard_warning
Act_ActTrig = active_players_in_zone

;; Make NPC´s Invulnerable if no player is inside mission zone

[Trigger]
nickname = assign_out_mission_label
repeatable = Auto
Cnd_DistVec = players_in_mission, -11531.8, 40, 18254.9, 10000, St01, OUTSIDE
Act_AddLabel = ACTIVATOR, players_out_mission
Act_RemoveLabel = ACTIVATOR, players_in_mission
Act_ActTrig = no_active_players_left
Act_PlayMusic = players_out_mission, music_omicron_danger, music_reveal_enemy_position_of_strength, music_no_lair_battle, music_omicron_danger, 1, true

[Trigger]
nickname = no_active_players_left
repeatable = Manual
Cnd_Count = players_in_mission, 0, Equal
Act_ActTrig = end_mission_timer

[Trigger]
nickname = assign_in_mission_label
repeatable = Auto
Cnd_DistVec = players_out_mission, -11531.8, 40, 18254.9, 10000, St01, INSIDE
Act_AddLabel = ACTIVATOR, players_in_mission
Act_RemoveLabel = ACTIVATOR, players_out_mission
Act_ActTrig = active_players_in_zone
Act_PlayMusic = players_in_mission, music_omicron_danger, music_reveal_enemy_position_of_strength, music_no_lair_battle, none, 1, false

[Trigger]
nickname = active_players_in_zone
repeatable = Manual
Cnd_Count = players_in_mission, 0, Greater
Act_DeactTrig = end_mission_timer

[Trigger]
nickname = end_mission_timer
Cnd_Timer = 120
Act_ActTrig = clean_up_repeatables
Act_ActTrig = clean_up_players
Act_Destroy = order, Explode
Act_Destroy = nomads, Explode
Act_ActTrig = mission_end

;; Pulling NPC´s back to Missionzone if idling outside

[Trigger]
nickname = send_nomads_back
repeatable = Auto
Cnd_DistVec = nomads, -11531.8, 40, 18254.9, 2500, St01, OUTSIDE
Act_GiveObjList = ACTIVATOR, ol_attackers

[Trigger]
nickname = send_order_back
repeatable = Auto
Cnd_DistVec = order, -11531.8, 40, 18254.9, 2500, St01, OUTSIDE
Act_GiveObjList = ACTIVATOR, ol_attackers

;; Second Nomad Fighter Group

[Trigger]
nickname = spawn_second_wave
Cnd_Destroyed = nomads, 4
Act_SpawnFormation = NomadSecondWave
Act_ActTrig = coms_inform_player_about_new_hostiles01
Act_ActTrig = Set_second_wave_OL

[Trigger]
nickname = Set_second_wave_OL
Act_GiveObjList = npc_second_wave01, ol_attackers
Act_GiveObjList = npc_second_wave02, ol_attackers
Act_GiveObjList = npc_second_wave03, ol_attackers
Act_GiveObjList = npc_second_wave04, ol_attackers
Act_GiveObjList = npc_second_wave05, ol_attackers
Act_GiveObjList = npc_second_wave06, ol_attackers

;; Third Nomad Fighter Group

[Trigger]
nickname = spawn_third_wave
Cnd_Destroyed = nomads, 8
Act_SpawnFormation = NomadThirdWave
Act_ActTrig = coms_inform_player_about_new_hostiles02
Act_ActTrig = Set_third_wave_OL

[Trigger]
nickname = Set_third_wave_OL
Act_GiveObjList = npc_third_wave01, ol_attackers
Act_GiveObjList = npc_third_wave02, ol_attackers
Act_GiveObjList = npc_third_wave03, ol_attackers
Act_GiveObjList = npc_third_wave04, ol_attackers
Act_GiveObjList = npc_third_wave05, ol_attackers
Act_GiveObjList = npc_third_wave06, ol_attackers

;; Fourth Nomad Fighter Group

[Trigger]
nickname = spawn_fourth_wave
Cnd_Destroyed = nomads, 12
Act_SpawnFormation = NomadFourthWave
Act_ActTrig = Set_fourth_wave_OL
Act_ActTrig = spawn_lambda_wing

[Trigger]
nickname = Set_fourth_wave_OL
Act_GiveObjList = npc_fourth_wave01, ol_attackers
Act_GiveObjList = npc_fourth_wave02, ol_attackers
Act_GiveObjList = npc_fourth_wave03, ol_attackers
Act_GiveObjList = npc_fourth_wave04, ol_attackers
Act_GiveObjList = npc_fourth_wave05, ol_attackers
Act_GiveObjList = npc_fourth_wave06, ol_attackers

;; Lambda Spawning

[Trigger]
nickname = spawn_lambda_wing
Cnd_True = no_params
Act_SpawnFormation = LambdaWing
Act_ActTrig = Order_Lambda_leader_Invulnerable
Act_ActTrig = Set_lamdba_OL
Act_SendComm = Lambda_engages, players_in_mission, npc_order_lambda01, DX_M04_0220_LSF_LAMBDA, 0, false

[Trigger]
nickname = Set_lamdba_OL
Act_GiveObjList = npc_order_lambda01, ol_attackers
Act_GiveObjList = npc_order_lambda02, ol_attackers
Act_GiveObjList = npc_order_lambda03, ol_attackers
Act_GiveObjList = npc_order_lambda04, ol_attackers

[Trigger]
nickname = Order_Lambda_leader_Invulnerable
Cnd_True = no_params
Act_Invulnerable = npc_order_lambda01, true, true, 0.75

;; Infromation via Coms

[Trigger]
nickname = coms_inform_player_about_new_hostiles01
Cnd_True = no_params
Act_SendComm = coms_newhostiles_alpha, players_in_mission, npc_order_alpha01, gcs_combat_announce_enemysighted_04-, 0, false

[Trigger]
nickname = coms_inform_player_about_new_hostiles02
Cnd_True = no_params
Act_EtherComm = coms_newhostiles_nn, players_in_mission, NNVoice, warning, info_incoming_hostiles, 0, false, 0, , 
;res str
; Neural Net

;; Mission Accomplished

[Trigger]
nickname = all_attackers_killed
repeatable = Manual
Cnd_Destroyed = nomads, -1
Act_ActTrig = mission_target_killed

[Trigger]
nickname = mission_target_killed
Cnd_True = no_params
Act_ActTrig = bgc_Alpha_1_01
Act_AdjAcct = players_in_mission, 5000000
Act_AdjRep = players_in_mission, fc_or_grp, 0.2
Act_AddCargo = players_in_mission, surprise_box_loot_gold01, 1
Act_PlayMusic = players_in_mission, none, none, none, music_victory, 0, true
Act_SetNNObj = players_in_mission, 1231
Act_SetNNObj = players_coming_in, 1231
Act_SendComm = coms_alldone, players_in_mission, npc_order_beta01, gcs_combat_announce_allclear_01-, gcs_dockrequest_thankshelp_01-, 1, true
Act_DeactTrig = send_nomads_back
Act_DeactTrig = send_order_back
Act_ActTrig = clean_up_repeatables
Act_ActTrig = clean_up_players

[Trigger]
nickname = bgc_Alpha_1_01
Cnd_CommComplete = coms_alldone
Act_SendComm = coms_bgc_alpha_1_01, order, npc_order_alpha01, gcs_misc_attentionallwingmen_01+, gcs_combat_takinglead_03-, 1, true
Act_ActTrig = bgc_beta_1_01

[Trigger]
nickname = bgc_beta_1_01
Cnd_CommComplete = coms_bgc_alpha_1_01
Act_SendComm = coms_bgc_beta_1_01, order, npc_order_beta01, gcs_misc_ack_02-, 1, true
Act_ActTrig = bgc_lambda_1_01

[Trigger]
nickname = bgc_lambda_1_01
Cnd_CommComplete = coms_bgc_beta_1_01
Act_SendComm = coms_bgc_lambda_1_01, order, npc_order_lambda01, gcs_misc_ack_01-, 1, true
Act_ActTrig = Set_mission_complete_OL

[Trigger]
nickname = Set_mission_complete_OL
Cnd_CommComplete = coms_bgc_lambda_1_01
;Form Up on Leader
Act_GiveObjList = npc_order_alpha01, ol_survivors_formup_alpha
Act_GiveObjList = npc_order_beta01, ol_survivors_formup_beta
Act_GiveObjList = npc_order_lambda01, ol_survivors_formup_lamdba
;Fly to Toledo
Act_GiveObjList = npc_order_alpha01, ol_back_to_toledo
Act_GiveObjList = npc_order_beta01, ol_back_to_toledo
Act_GiveObjList = npc_order_lambda01, ol_back_to_toledo
;Activate Mission End (30s)
Act_ActTrig = mission_end_delayed

[Trigger]
nickname = clean_up_repeatables
Cnd_True = no_params
Act_DeactTrig = passer_bys_flew_away
Act_DeactTrig = passer_bys_landed
Act_DeactTrig = deserteurs_warning_flew_away
Act_DeactTrig = deserteurs_flew_away
Act_DeactTrig = deserteurs_landed
Act_DeactTrig = Player_died
Act_DeactTrig = Player_died_outside
Act_DeactTrig = call_for_support
Act_DeactTrig = call_for_support_after_init
Act_DeactTrig = missionzone_approached
Act_DeactTrig = missionzone_reached
Act_DeactTrig = missionzone_re_approached
Act_DeactTrig = assign_out_mission_label
Act_DeactTrig = assign_in_mission_label
Act_DeactTrig = active_players_in_zone
Act_DeactTrig = no_active_players_left

[Trigger]
nickname = clean_up_players
Cnd_True = no_params
Act_RemoveLabel = players_in_mission, players_in_mission
Act_RemoveLabel = players_coming_in, players_coming_in
Act_RemoveLabel = players_heard_request, players_heard_request
Act_RemoveLabel = players_out_mission, players_out_mission
Act_RemoveLabel = players_heard_warning, players_heard_warning
Act_RemoveLabel = deserteurs, deserteurs
Act_RemoveLabel = kia, kia
Act_RemoveLabel = mia, mia

[Trigger]
nickname = mission_end_delayed
Cnd_Timer = 30
Act_EndMission = no_params

[Trigger]
nickname = mission_end
Cnd_True = no_params
Act_EndMission = no_params
