[Mission]
nickname = openworld_dyson_sphere
initstate = ACTIVE

[Npc]
nickname = npc_no_battleship
archetype = no2_battleship
loadout = fc_n_no2_battleship_cloak
state_graph = FIGHTER
faction = fc_n_grp
pilot = li_cruiser_default
level = 50

[MsnNpc]
nickname = st01_no_battleship01
npc = npc_no_battleship
system = St01
position = 19441, 0, 14558
rotate = 0, -27, 0
use_ship_ids = true

[ObjList]
nickname = obj_wait
SetPriority = ALWAYS_EXECUTE
Delay = 9999999

[ObjList]
nickname = obj_stay_at_xeno_gate
SetPriority = NORMAL
StayInRange = 16116, 0, 12472, 6000
Idle = no_params

[ObjList]
nickname = obj_return_to_xeno_gate
SetPriority = ALWAYS_EXECUTE
GotoVec = Goto_No_Cruise, 19441, 0, 14558

[Trigger]
nickname = spawn_gate_defender
initstate = ACTIVE
Cnd_InSpace = STRANGER, St01
Act_DebugMsg = spawn_gate_defender
Act_SpawnShip = st01_no_battleship01, obj_wait
Act_ActTrig = someone_close_to_defender
Act_ActTrig = inside_range_to_gate_defender

[Trigger]
nickname = inside_range_to_gate_defender
repeatable = AUTO
Cnd_DistObj = STRANGER, st01_no_battleship01, 2500, INSIDE
Act_DebugMsg = inside_range_to_gate_defender
Act_AddLabel = ACTIVATOR, at_gate_defender
Act_DebugMsg = Added
Act_ActTrig = outside_range_to_gate_defender
Act_ActTrig = left_st01_space

[Trigger]
nickname = outside_range_to_gate_defender
repeatable = AUTO
Cnd_DistObj = at_gate_defender, st01_no_battleship01, 4000, OUTSIDE
Act_DebugMsg = outside_range_to_gate_defender
Act_RemoveLabel = ACTIVATOR, at_gate_defender

[Trigger]
nickname = left_st01_space
repeatable = AUTO
Cnd_SystemSpaceExit = at_gate_defender, ANY, St01
Act_DebugMsg = left_st01_space
Act_LeaveMsn = ACTIVATOR

[Trigger]
nickname = someone_close_to_defender
repeatable = MANUAL
Act_DebugMsg = someone_close_to_defender
Cnd_Count = at_gate_defender, 1, EQUAL
Act_GiveObjList = st01_no_battleship01, obj_stay_at_xeno_gate
Act_Cloak = st01_no_battleship01, FALSE
Act_DeactTrig = wait_at_xeno_gate
Act_ActTrig = nobody_close_to_defender

[Trigger]
nickname = nobody_close_to_defender
repeatable = MANUAL
Cnd_Count = at_gate_defender, 0, EQUAL
Act_DebugMsg = nobody_close_to_defender
Act_GiveObjList = st01_no_battleship01, obj_return_to_xeno_gate
Act_Cloak = st01_no_battleship01, TRUE
Act_ActTrig = someone_close_to_defender
Act_ActTrig = wait_at_xeno_gate

[Trigger]
nickname = wait_at_xeno_gate
repeatable = MANUAL
Act_DebugMsg = wait_at_xeno_gate
Cnd_DistVec = st01_no_battleship01, 19441, 0, 14558, 200, INSIDE
Act_GiveObjList = st01_no_battleship01, obj_wait